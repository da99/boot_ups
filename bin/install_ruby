#!/usr/bin/env bash
# -*- bash -*-
#
#!/usr/bin/env node
# -*- js   -*-
#
#!/usr/bin/env lua
#
#
dir="$(pwd)"
cd ..
boot="$(pwd)"
rvm_path="$boot/rvm"
ver=2.0.0
cd $dir

set -u -e -o pipefail

rc="$HOME/.rvmrc"

if [[ ! -f $rc ]]
then
  echo "rvm_path=$rvm_path"      >> $rc
  echo "rvm_ignore_dotfiles=yes" >> $rc
fi

if [[ ! -d $rvm_path ]]
then
  curl -L https://get.rvm.io | bash -s stable
fi

$rvm_path requirements
$rvm_path install $ver

HOME=$rvm_path rvm alias create default $ver
HOME=$rvm_path rvm alias create current $ver


if [[ "$rvm_path/bin/ruby" != "$(command -v ruby)" ]]
then
  echo -e "\n======================"
  echo    "Put this in your \$PATH:"
  echo    "export PATH=\"$rvm_path/bin:\$PATH\""
fi


